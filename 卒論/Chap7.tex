LE-Qではデータベース側に転置インデクスを持たないため，パターン2の$V_T$を起点とするマッチング判定で転置インデクスを使用しない．

ここでユーザ間類似度$\mbox{sim}(V_T,U_T)$が$\epsilon_u$と近い時，パターン2の処理で$V_{UM}$の多くのテキストをマッチング判定
しないと類似，非類似を確定できない．つまり，枝刈りの効果が期待できない．このように枝刈りの効果が弱い場合に，$V_{UM}$に
属するテキストを起点とする転置インデクスを使わないマッチング判定を，$U_{UM}$に属するテキストを起点としてクエリ側の転置インデクス
を使用するマッチング判定に切り替える改善案を提案する．具体的には$\epsilon_r$を閾値パラメータとして，以下の基準でマッチング判定
モードを切り替える．
\begin{itemize}
\item モード1: $|V_{UM}|< \epsilon_r$ならば，$U_{UM}$に属するテキストを起点としてマッチング判定
\item モード2: $|V_{UM}|\ge \epsilon_r$ならば，$V_{UM}$に属するテキストを起点としてマッチング判定
\end{itemize}

モード1の$U_{UM}$に属するテキストを起点とするマッチング判定処理を以下に述べる．$\forall O_U \in U_{UM}$に対してマッチング判定を
行っており，極大マッチングを完成させる点に注意されたい．
\begin{quote}
    %\item $U_{UM}$からひとつずつテキストを\textbf{すべて}取り出し，$V_{UM}$のどのテキストとマッチングするかの判定を行う．
\noindent {\bf Step 1:} $\forall O_U \in U_{UM}$を起点とし, $V_{UM}$内のテキストを対象としたマッチング判定を転置インデクスを用いて行う．
その結果, $O_U$と$V_{UM}$のテキスト$O_V$がマッチングした時，$O_U \in U_M，O_V \in V_M$とする．\\
\noindent {\bf Step 2:} $U_{UM}$の全テキストのマッチング判定後，$V_{UM}$に残っているテキストをすべて$V_{NM}$に分類する．
\end{quote}

以上をまとめると．$|V_{UM}|$が小さく枝刈りが期待できない状況では遅延評価をせずに，モード1で転置インデクスを使って高速に極大マッチングを完成させるということになる．これを$\epsilon_r$を用いたマッチング切替と呼ぶ．

一方で，$|V_{UM}|$が極端に小さい時，転置インデクスを用いたマッチング判定が転置インデクスを用いないマッチング判定よりも遅い場合があると考える．

$U_{UM}$に属するテキストを起点とした転置インデクスを用いるマッチング判定では，
\begin{enumerate}
    \item テキストに含まれるそれぞれの単語の転置リストを取得
    \item DAAT方式でテキストを走査
\end{enumerate}
を行う．転置インデクスはクエリユーザの全テキストにより構成されるため，$V_M, V_{NM}, V_{UM}$所属のテキストが混在する．
%よってマッチング判定を行う際，
よってマッチング判定を行う際，パターン２において
\begin{itemize}
    %\item パターン１ : マッチング相手が$V_{NM}$所属であること
    %\item パターン２ : マッチング相手が$V_{UM}$所属であること
    \item マッチング相手が$V_{UM}$所属であること
\end{itemize}
を満たすテキストにのみマッチング判定をする必要がある．このことから$V_{UM}$に属するテキストが少ないとき，転置インデクスを参照しても$V_{UM}$に属さないテキストが取り出され，マッチング判定となる$V_{UM}$に属するテキストとなかなか遭遇しない．
%目的のテキスト集合に所属するテキストを見つけるまでに，それ以外のテキスト集合に所属するテキストを多く調べる必要があると考えられる．
この場合，マッチング判定は高速に行えるが$V_{UM}$に所属するテキストを見つけることに多くの時間がかかり，結果的に転置インデクスを用いないマッチングの方が早いと考える．よって$V_{UM}$の大きさが閾値$\epsilon_m$以下のとき，マッチング方法を転置インデクスを用いないマッチングに変更する．これを$\epsilon_m$を用いたマッチング切替と呼ぶ．

このように，遅延評価を実施するかを適応的に切り替えることから，LE-Qに$\epsilon_r$を用いたマッチング切替と$\epsilon_m$を用いたマッチング切替を取り入れたアルゴリズムをALE-Q (Adaptive LE-Q)と名付ける．